{% extends 'base.html' %}
{% block title %} {{event.name}} info {% endblock %}
{% block header_title %} {{subtitle}} {% endblock %}
{% block content %}
<div class="card mb-3">
    <div class="row g-0">
      <div class="col-md-4">
        <img src="{{ event.image_url }}" class="card-img-top"  alt="Event Image">

      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h4 class="card-title">
             {{event.name}}
          </h4>
              <p class="card-text">Nombre: {{event.nombre}}</p>
              <p class="card-text">Ubicacion: {{event.ubicacion}}</p>
              <p class="card-text">Inicia: {{event.fechaInicio}}</p>
              <p class="card-text">Termina: {{event.fechaFin}}</p>
              <p class="card-text">Descripción: {{event.descripcion}}</p>
              <p class="card-text">Precio: {{event.precio}}</p>
              <p class="card-text">Capacidad: {{event.capacidad}}</p>
              <p class="card-text">Asistencia: {{event.asistencia}}</p>
              
              <a class="btn bg-primary text-white" href="{% url 'events_index' %}">Go back</a>
              <div class="card-body">
                <h4 class="card-title">Acciones</h4>
                {% if user.is_authenticated %}
                    {% if user == event.organizador %}
                        <a class="btn btn-warning" href="{% url 'edit_event' id=event.id %}">Editar</a>
                        <a class="btn btn-danger" href="{% url 'delete_event' id=event.id %}" onclick="return confirm('¿Estás seguro de que deseas eliminar este evento?')">Eliminar</a>
                    {% endif %}
                {% endif %}
              </div>
              <div class="card-body">
                <h4 class="card-title">Me gusta</h4>
                <p>{{ event.like_set.count }} personas les gusta este evento</p>
                {% if user.is_authenticated %}
                    <a class="btn btn-primary" href="{% url 'like_event' id=event.id %}">
                        {% if user in event.like_set.all %}
                            No me gusta
                        {% else %}
                            Me gusta
                        {% endif %}
                    </a>
                {% endif %}
              </div>
              <div class="card-body">
                <h4 class="card-title">Comentarios</h4>
                {% for comentario in comentarios %}
                    <p>{{ comentario.usuario.username }} dijo: {{ comentario.texto }}</p>
                {% endfor %}
                
                <!-- Formulario para agregar comentarios -->
                {% if user.is_authenticated %}
                    <form method="post" action="{% url 'show_event' id=event.id %}">
                        {% csrf_token %}
                        {{ comentario_form.as_p }}
                        <button type="submit" class="btn btn-primary">Agregar Comentario</button>
                    </form>
                {% else %}
                    <p>Inicia sesión para agregar un comentario.</p>
                {% endif %}
            </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}